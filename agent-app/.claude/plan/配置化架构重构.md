# 配置化架构重构 - 执行计划

## 任务上下文
用户要求重构agent-app项目，实现：
1. 后端架构支持配置化加载
2. prompts单独目录管理（数据库存储）
3. 按照开发规约实现域驱动架构
4. 支持两条数据流：外部插件推送 + Git submodule更新

## 核心设计决策
- 采用方案2：全新架构重建
- 域驱动设计：agent, knowledge, prompt, config, pkm域
- 数据库驱动的Prompt管理 + Jinja2渲染
- 异步优先，Pydantic V2类型安全

## 实施步骤
1. 项目结构重构 - 按域驱动架构重新组织目录
2. 基础设施层实现 - storage/数据库连接管理
3. 共享类型定义 - types/下的基础模型和异常
4. 配置管理系统 - config域实现base_config + local_config
5. Prompt管理系统 - prompt域完整实现 + Jinja2渲染
6. 数据库迁移脚本 - 创建表结构和初始数据
7. 工具函数库 - util/下的通用工具
8. API框架搭建 - FastAPI基础路由和中间件
... (后续步骤按计划执行)

## 开始执行时间
2024-11-14 03:30:00